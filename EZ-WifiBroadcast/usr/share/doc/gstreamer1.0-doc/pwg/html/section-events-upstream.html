<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Upstream events</title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GStreamer Plugin Writer's Guide (1.4.4)"><link rel="up" href="chapter-advanced-events.html" title="Chapter 17. Events: Seeking, Navigation and More"><link rel="prev" href="chapter-advanced-events.html" title="Chapter 17. Events: Seeking, Navigation and More"><link rel="next" href="section-events-definitions.html" title="All Events Together"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Upstream events</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter-advanced-events.html">Prev</a> </td><th width="60%" align="center">Chapter 17. Events: Seeking, Navigation and More</th><td width="20%" align="right"> <a accesskey="n" href="section-events-definitions.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="section-events-upstream"></a>Upstream events</h2></div></div></div><p>
      Upstream events are generated by an element somewhere downstream in
      the pipeline (example: a video sink may generate navigation
      events that informs upstream elements about the current position of
      the mouse pointer). This may also happen indirectly on request of the
      application, for example when the application executes a seek on a
      pipeline this seek request will be passed on to a sink element which
      will then in turn generate an upstream seek event.
    </p><p>
      The most common upstream events are seek events, Quality-of-Service
      (QoS) and reconfigure events.
    </p><p>
      An upstream event can be sent using the
      <code class="function">gst_pad_send_event</code> function. This
      function simply call the default event handler of that pad. The default
      event handler of pads is <code class="function">gst_pad_event_default</code>, and
      it basically sends the event to the peer of the internally linked pad.
      So upstream events always arrive on the src pad of your element and are
      handled by the default event handler except if you override that handler
      to handle it yourself. There are some specific cases where you have to
      do that :
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: opencircle; "><li class="listitem" style="list-style-type: circle"><p>
          If you have multiple sink pads in your element. In that case you will
          have to decide which one of the sink pads you will send the event to
          (if not all of them).
        </p></li><li class="listitem" style="list-style-type: circle"><p>
          If you need to handle that event locally. For example a navigation 
          event that you will want to convert before sending it upstream, or
          a QoS event that you want to handle.
        </p></li></ul></div><p>
      The processing you will do in that event handler does not really matter
      but there are important rules you have to absolutely respect because
      one broken element event handler is breaking the whole pipeline event 
      handling. Here they are :
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: opencircle; "><li class="listitem" style="list-style-type: circle"><p>
          Always handle events you won't handle using the default 
          <code class="function">gst_pad_event_default</code> method. This method will
          depending on the event, forward the event or drop it. 
        </p></li><li class="listitem" style="list-style-type: circle"><p>
          If you are generating some new event based on the one you received
          don't forget to gst_event_unref the event you received.
        </p></li><li class="listitem" style="list-style-type: circle"><p>
          Event handler function are supposed to return TRUE or FALSE indicating
          if the event has been handled or not. Never simply return TRUE/FALSE
          in that handler except if you really know that you have handled that 
          event.
        </p></li><li class="listitem" style="list-style-type: circle"><p>
          Remember that the event handler might be called from a different
          thread than the streaming thread, so make sure you use
          appropriate locking everywhere.
        </p></li></ul></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter-advanced-events.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="chapter-advanced-events.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="section-events-definitions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 17. Events: Seeking, Navigation and More </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> All Events Together</td></tr></table></div></body></html>
